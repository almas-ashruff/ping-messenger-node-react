(this["webpackJsonpping-messenger"]=this["webpackJsonpping-messenger"]||[]).push([[0],{113:function(e,t,c){},114:function(e,t,c){},119:function(e,t,c){"use strict";c.r(t);var s=c(2),n=c.n(s),a=c(30),i=c.n(a),r=(c(82),c(26)),o=c(15),j=(c(83),c(84),c(67)),d=c.n(j),l=c(68),h=c.n(l),u=c(138),b=c(133),O=c(69),m=c.n(O),x=c(134),f=c(32),g=c.n(f),p=c(44),v=(c(86),c(66)),w=c.n(v).a.create({baseURL:"https://remembrance-lumberjack-65110.herokuapp.com"}),A=c(45),N=c.n(A),C=c(36),S=c(4),X=function(e){var t=e.rooms,c=function(){var e=Object(p.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=prompt("Enter name for chat"))&&w.post("./rooms/new",{roomName:t,messages:[]}),window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=Object(s.useState)(""),a=Object(o.a)(n,2),i=(a[0],a[1]);return Object(s.useEffect)((function(){i(Math.floor(5e3*Math.random()))}),[]),Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{onClick:c,className:"sidebarChat",style:{paddingLeft:"75px"},children:Object(S.jsx)("h2",{children:"Add new Chat "})}),Object(S.jsx)("div",{children:t.map((function(e){return Object(S.jsx)(C.b,{to:"/rooms/".concat(e._id),children:Object(S.jsxs)("div",{className:"sidebarChat",style:{textDecoration:"none !important",color:"inherit"},children:[Object(S.jsx)(u.a,{src:"https://avatars.dicebear.com/api/human/".concat(Math.floor(5e3*Math.random()),".svg")}),Object(S.jsxs)("div",{className:"sidebarChat_info",children:[Object(S.jsx)("h2",{children:e.roomName}),Object(S.jsx)("p",{children:"The last message"})]})]})})}))})]})},E=Object(s.createContext)(),T=function(e){var t=e.reducer,c=e.initialState,n=e.children;return Object(S.jsx)(E.Provider,{value:Object(s.useReducer)(t,c),children:n})},k=function(){return Object(s.useContext)(E)},I=function(e){var t=e.rooms,c=k(),s=Object(o.a)(c,2),n=s[0].user;s[1];return Object(S.jsxs)("div",{className:"sidebar",children:[Object(S.jsxs)("div",{className:"sidebar_header",children:[Object(S.jsx)(u.a,{src:null===n||void 0===n?void 0:n.photoURL}),Object(S.jsxs)("div",{className:"sidebar_header_right",children:[Object(S.jsx)(b.a,{children:Object(S.jsx)(d.a,{})}),Object(S.jsx)(b.a,{children:Object(S.jsx)(h.a,{})}),Object(S.jsx)(b.a,{children:Object(S.jsx)(m.a,{})})]})]}),Object(S.jsx)("div",{className:"sidebar_search",children:Object(S.jsxs)("div",{className:"sidebar_searchContainer",children:[Object(S.jsx)(x.a,{}),Object(S.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(S.jsx)("div",{className:"sidebar_chats",children:Object(S.jsx)(X,{rooms:t})})]})},B=(c(113),c(135)),y=c(136),D=c(70),P=c.n(D),q=c(71),z=c.n(q),M=c(10),Q=function(e){var t=e.messages,c=e.rooms,n=Object(s.useState)(""),a=Object(o.a)(n,2),i=a[0],r=a[1];Object(s.useEffect)((function(){r(Math.floor(5e3*Math.random()))}),[]);var j=Object(s.useState)(""),d=Object(o.a)(j,2),l=d[0],h=d[1],O=function(){var e=Object(p.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,w.post("/messages/new",{message:l,name:" ",timestamp:Date().slice(0,21),received:!1});case 3:h("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=Object(M.f)().roomId,f=Object(s.useState)(""),v=Object(o.a)(f,2),A=v[0],N=v[1];return Object(s.useEffect)((function(e){if(m)for(var t=0;t<c.length;t++)if(c[t]._id==m){N(c[t].roomName);break}}),[m]),Object(S.jsxs)("div",{className:"chat",children:[Object(S.jsxs)("div",{className:"chat_header",children:[Object(S.jsx)(u.a,{src:"https://avatars.dicebear.com/api/human/".concat(i,".svg")}),Object(S.jsxs)("div",{className:"chat_headerInfo",children:[Object(S.jsx)("h3",{children:A}),Object(S.jsx)("p",{children:"Last seen"})]}),Object(S.jsxs)("div",{className:"chat_header_right",children:[Object(S.jsx)(b.a,{children:Object(S.jsx)(x.a,{})}),Object(S.jsx)(b.a,{children:Object(S.jsx)(B.a,{})}),Object(S.jsx)(b.a,{children:Object(S.jsx)(y.a,{})})]})]}),Object(S.jsx)("div",{className:"chat_body",children:t.map((function(e){return Object(S.jsxs)("p",{className:"chat_message ".concat(!e.received&&"chat_reciever"),children:[Object(S.jsx)("span",{className:"chat_name",children:e.name}),e.message,Object(S.jsx)("span",{className:"chat_timestamp",children:e.timestamp})]})}))}),Object(S.jsxs)("dic",{className:"chat_footer",children:[Object(S.jsx)(P.a,{}),Object(S.jsxs)("form",{children:[Object(S.jsx)("input",{value:l,onChange:function(e){return h(e.target.value)},placeholder:"Type a message",type:"text"}),Object(S.jsx)("button",{type:"submit",onClick:O,children:"Send a message"})]}),Object(S.jsx)(z.a,{})]})]})},J=c(72),W=c(137),F=(c(114),c(47)),H=(F.a.initializeApp({apiKey:"AIzaSyA8LtzFulsT7A2i6FR4O24fFM3hLQj3r2I",authDomain:"ping-messenger-7450c.firebaseapp.com",projectId:"ping-messenger-7450c",storageBucket:"ping-messenger-7450c.appspot.com",messagingSenderId:"353692271690",appId:"1:353692271690:web:da84dcbda3e55d29bd52b3",measurementId:"G-WJSP6R7JEZ"}),F.a.auth()),V=new F.a.auth.GoogleAuthProvider,L=c(53),U="SET_USER",K=function(e,t){switch(console.log(t),t.type){case U:return Object(L.a)(Object(L.a)({},e),{},{user:t.user});default:return e}};var G=function(){var e=k(),t=Object(o.a)(e,2);Object(J.a)(t[0]);var c=t[1];return Object(S.jsx)("div",{className:"login",children:Object(S.jsxs)("div",{className:"login_container",children:[Object(S.jsx)("img",{src:"data:image/png;base64,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"}),Object(S.jsx)("div",{className:"login_text",children:Object(S.jsx)("h1",{children:"Sign in to Ping!"})}),Object(S.jsx)(W.a,{onClick:function(){H.signInWithPopup(V).then((function(e){c({type:U,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign In With Google"})]})})};var Z=function(){var e=k(),t=Object(o.a)(e,2),c=t[0].user,n=(t[1],Object(s.useState)([])),a=Object(o.a)(n,2),i=a[0],j=a[1];Object(s.useEffect)((function(){w.get("/messages/sync").then((function(e){j(e.data)}))}),[]),Object(s.useEffect)((function(){var e=new N.a("c7ed33c4fe1f89673d3a",{cluster:"ap2"}).subscribe("messages");return e.bind("inserted",(function(e){j([].concat(Object(r.a)(i),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[i]),console.log(i);var d=Object(s.useState)([]),l=Object(o.a)(d,2),h=l[0],u=l[1];return Object(s.useEffect)((function(){w.get("/rooms/sync").then((function(e){u(e.data)}))}),[]),Object(s.useEffect)((function(){var e=new N.a("c7ed33c4fe1f89673d3a",{cluster:"ap2"}).subscribe("rooms");return e.bind("inserted",(function(e){u([].concat(Object(r.a)(h),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[h]),Object(S.jsxs)("div",{className:"app",children:[Object(S.jsx)("h1",{style:{fontFamily:"Marker Felt, fantasy",color:"#006400",fontWeight:"bold",fontSize:"55px",marginTop:"15px",marginBottom:"35px",letterSpacing:"10px"},children:"ping"}),c?Object(S.jsx)(C.a,{children:Object(S.jsx)(M.c,{children:Object(S.jsxs)("div",{className:"app_body",children:[Object(S.jsx)(I,{rooms:h}),Object(S.jsx)(M.a,{path:"/rooms/:roomId",children:Object(S.jsx)(Q,{messages:i,rooms:h})})]})})}):Object(S.jsx)(G,{})]})},R=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,139)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),s(e),n(e),a(e),i(e)}))};i.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(T,{initialState:{user:null},reducer:K,children:Object(S.jsx)(Z,{})})}),document.getElementById("root")),R()},82:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},86:function(e,t,c){}},[[119,1,2]]]);
//# sourceMappingURL=main.7faee2b0.chunk.js.map